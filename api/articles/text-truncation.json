{"title":"前端文字的截断处理","slug":"text-truncation","date":"2015-09-06T09:37:32.000Z","updated":"2016-12-27T12:42:37.061Z","comments":true,"path":"api/articles/text-truncation.json","excerpt":"<p>关于前端页面的文字溢出截断的招数已经很常见了。<br>通常的实现有，前端css控制、后端字数输出控制或者前端js字数处理等。</p>","content":"<p>关于前端页面的文字溢出截断的招数已经很常见了。<br>通常的实现有，前端css控制、后端字数输出控制或者前端js字数处理等。</p><a id=\"more\"></a><h2 id=\"单行文字\"><a href=\"#单行文字\" class=\"headerlink\" title=\"单行文字\"></a>单行文字</h2><p>单行文字的溢出处理很简单，我通常是使用css来控制，在文字末尾加上<code>...</code>。</p><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.ellipsis</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">  <span class=\"attribute\">text-overflow</span>: ellipsis;</div><div class=\"line\">  <span class=\"attribute\">white-space</span>: nowrap;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure><p>给需要文字截断的节点增加一个这样的基础类，然后设置该节点的宽。<br>同时注意给未来可能会出现溢出的节点也加上此类，再设置最大宽度<code>max-width</code>，因为很多奇葩用户的输入是你无法掌控的。 - -！</p><h2 id=\"多行文字\"><a href=\"#多行文字\" class=\"headerlink\" title=\"多行文字\"></a>多行文字</h2><p>我希望在一个的固定高度的容器中，内容超出后，最后一个文字显示<code>...</code>。</p><p>如法炮制给多行文字的容器添加<code>ellipsis</code>类后，你会发现的确是显示<code>...</code>，不过此时文字是一行的。<br>因为在该类中添加了属性<code>white-space</code>，用来定义一个段落如何换行。属性值<code>nowrap</code>：禁止文本换行，除非遇到<code>&lt;br&gt;</code>。</p><p>一番思考后，确定了一个方案。</p><ol><li>给固定高度的容器添加<code>overflow: hidden</code>；</li><li>给容器添加相对定位；</li><li>添加伪元素样式，<code>content:&#39;...&#39;</code>，绝对定位，然后位置定位在容器末尾。</li></ol><p>伪元素的兼容性为IE8，如果需要兼容IE7的可以使用标签代替。</p><h2 id=\"带显示全部的多行文字\"><a href=\"#带显示全部的多行文字\" class=\"headerlink\" title=\"带显示全部的多行文字\"></a>带显示全部的多行文字</h2><p>类似 QQ 空间、微信、微博那种。</p><iframe scrolling=\"no\" width=\"100%\" height=\"300\" src=\"http://jsfiddle.net/imys/wymxhaek/3/embedded/html,css,result/light\" frameborder=\"0\" allowfullscreen></iframe><p>使用 2 个伪元素加 1 个 a 链接实现。<br>精妙之处在于使用伪元素遮挡一行文字，让 a 链接位于伪元素之上显示。</p>","categories":[],"tags":[{"name":"Html","path":"api/tags/Html.json"},{"name":"CSS","path":"api/tags/CSS.json"},{"name":"Ellipsis","path":"api/tags/Ellipsis.json"}]}