{"title":"不链接页面在新窗口或标签页运行代码","slug":"online-run-code","date":"2015-04-15T01:58:21.000Z","updated":"2016-11-12T19:24:50.930Z","comments":true,"path":"api/articles/online-run-code.json","excerpt":"<blockquote><p>在一些IT博客或者论坛都有在新窗口或标签页直接运行当前页面内代码的功能，但却不是像一些资源网站里的直接预览资源页面。这样动态的运行代码，无疑是节省了很大服务器空间。</p></blockquote><p>前端网（W3Cfuns）就有这样的功能，用户可以直接运行博主笔记内的代码，问答论坛也一样。</p><p>查看了一下代码实现，原来是<a href=\"http://www.w3school.com.cn/jsref/met_win_open.asp\">window.open()</a>方法。<br>","content":"<blockquote><p>在一些IT博客或者论坛都有在新窗口或标签页直接运行当前页面内代码的功能，但却不是像一些资源网站里的直接预览资源页面。这样动态的运行代码，无疑是节省了很大服务器空间。</p></blockquote><p>前端网（W3Cfuns）就有这样的功能，用户可以直接运行博主笔记内的代码，问答论坛也一样。</p><p>查看了一下代码实现，原来是<a href=\"http://www.w3school.com.cn/jsref/met_win_open.asp\" target=\"_blank\" rel=\"external\">window.open()</a>方法。<br><a id=\"more\"></a></p><h3 id=\"语法重温\"><a href=\"#语法重温\" class=\"headerlink\" title=\"语法重温\"></a>语法重温</h3><p><code>window.open(URL,name,features,replace)</code></p><ul><li><code>URL</code> 一个可选的字符串，声明了要在新窗口中显示的文档的 URL。如果省略了这个参数，或者它的值是空字符串，那么新窗口就不会显示任何文档。</li><li><code>name</code> 一个可选的字符串，该字符串是一个由逗号分隔的特征列表，其中包括数字、字母和下划线，该字符声明了新窗口的名称。这个名称可以用作标记 <code>&lt;a&gt;</code> 和 <code>&lt;form&gt;</code> 的属性 <code>target</code> 的值。如果该参数指定了一个已经存在的窗口，那么 <code>open()</code> 方法就不再创建一个新窗口，而只是返回对指定窗口的引用。在这种情况下，<code>features</code> 将被忽略。</li><li><code>features</code> 一个可选的字符串，声明了新窗口要显示的标准浏览器的特征。如果省略该参数，新窗口将具有所有标准特征。在窗口特征这个表格中，我们对该字符串的格式进行了详细的说明。</li><li><code>replace</code> 一个可选的布尔值。规定了装载到窗口的 URL 是在窗口的浏览历史中创建一个新条目，还是替换浏览历史中的当前条目。支持下面的值：true - URL 替换浏览历史中的当前条目。false - URL 在浏览历史中创建新的条目。</li></ul><p>参数1<code>URL</code>省略会打开一个空白页，也就是<code>about:blank</code>页。不过<code>window.open()</code>方法居然是有返回值的，可以返回新页面的<code>window</code>对象。</p><p>如此的话，我们就能访问新页面的<code>DOM</code>，自然就可以写入代码了。</p><h3 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>新窗口或标签页运行代码<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width:600px;height:150px;\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"code\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">        <span class=\"built_in\">document</span>.write(<span class=\"string\">\"&lt;h1&gt;我是运行在新窗口或标签页的代码。&lt;/h1&gt;\"</span>);</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">\"runCode()\"</span>&gt;</span>运行代码<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runCode</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> example = <span class=\"built_in\">window</span>.open(<span class=\"string\">''</span>,<span class=\"string\">''</span>,<span class=\"string\">''</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> code = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'code'</span>).value;</div><div class=\"line\">        example.document.write(code)</div><div class=\"line\">        example.focus();</div><div class=\"line\">    &#125;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>","categories":[],"tags":[{"name":"JavaScript","path":"api/tags/JavaScript.json"}]}