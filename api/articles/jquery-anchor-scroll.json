{"title":"jQuery实现通用的单页面锚点平滑滚动","slug":"jquery-anchor-scroll","date":"2015-04-07T05:45:03.000Z","updated":"2016-11-12T19:19:36.378Z","comments":true,"path":"api/articles/jquery-anchor-scroll.json","excerpt":"<blockquote><p>很多商品展示页，专题页等都会用到。<br>","content":"<blockquote><p>很多商品展示页，专题页等都会用到。<br><a id=\"more\"></a></p></blockquote><h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>锚链接平滑滚动<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"description\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"keywords\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">    * &#123;</div><div class=\"line\">        <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"attribute\">padding</span>: <span class=\"number\">0</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-tag\">html</span>,<span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">        <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-class\">.top</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">        <span class=\"attribute\">line-height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">        <span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(0, 0, 0, .6);</div><div class=\"line\">        <span class=\"attribute\">position</span>: fixed;</div><div class=\"line\">        <span class=\"attribute\">z-index</span>: <span class=\"number\">9</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-tag\">a</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</div><div class=\"line\">        <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">        <span class=\"attribute\">text-decoration</span>: none;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-class\">.top</span> <span class=\"selector-tag\">a</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">display</span>: inline-block;</div><div class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">20%</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-class\">.top</span> <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:hover</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(0, 0, 0, .4);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-class\">.page</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">        <span class=\"attribute\">min-height</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">        <span class=\"attribute\">background</span>: <span class=\"number\">#3C98FF</span>;</div><div class=\"line\">        <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-tag\">h1</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</div><div class=\"line\">        <span class=\"attribute\">padding-top</span>: <span class=\"number\">20%</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"top\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#div-1\"</span>&gt;</span>div-1<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#div-2\"</span>&gt;</span>div-2<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#div-3\"</span>&gt;</span>div-3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#div-4\"</span>&gt;</span>div-4<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div-1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>第一页<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div-2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>第二页<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div-3\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>第三页<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"div-4\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>第四页<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">    $(<span class=\"string\">'a[href*=#]'</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// 此处正则用于转换带页面URL的锚点，如 http://abc.html#div,具体正则格式据实际情况而定</span></div><div class=\"line\">        <span class=\"keyword\">var</span> targetId = $(<span class=\"keyword\">this</span>).attr(<span class=\"string\">'href'</span>).replace(<span class=\"regexp\">/\\w+.html/</span>,<span class=\"string\">''</span>);</div><div class=\"line\">        $(<span class=\"string\">\"html,body\"</span>).animate(&#123;<span class=\"attr\">scrollTop</span>: $(targetId).offset().top&#125;, <span class=\"number\">1000</span>);</div><div class=\"line\">    &#125;);</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>","categories":[],"tags":[{"name":"jQuery","path":"api/tags/jQuery.json"}]}